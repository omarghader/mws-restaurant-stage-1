"use strict";var restaurants=void 0,neighborhoods=void 0,cuisines=void 0,map=void 0,markers=[];document.addEventListener("DOMContentLoaded",function(e){fetchNeighborhoods(),fetchCuisines(),updateRestaurants()});var fetchNeighborhoods=function(){DBHelper.fetchNeighborhoods(function(e,t){e?console.error(e):(self.neighborhoods=t,fillNeighborhoodsHTML())})},fillNeighborhoodsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.neighborhoods,n=document.getElementById("neighborhoods-select");e.forEach(function(e){var t=document.createElement("option");t.innerHTML=e,t.value=e,t.setAttribute("role","option"),n.append(t)})},fetchCuisines=function(){DBHelper.fetchCuisines(function(e,t){e?console.error(e):(self.cuisines=t,fillCuisinesHTML())})},fillCuisinesHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.cuisines,n=document.getElementById("cuisines-select");e.forEach(function(e){var t=document.createElement("option");t.innerHTML=e,t.value=e,n.append(t)})};window.initMap=function(){self.map=new google.maps.Map(document.getElementById("map"),{zoom:12,center:{lat:40.722216,lng:-73.987501},scrollwheel:!1}),updateRestaurants()};var updateRestaurants=function(){var e=document.getElementById("cuisines-select"),t=document.getElementById("neighborhoods-select"),n=e.selectedIndex,r=t.selectedIndex,a=e[n].value,i=t[r].value;0<n&&e.querySelectorAll("option").forEach(function(e,t){t===n?e.setAttribute("aria-selected","true"):e.removeAttribute("aria-selected")}),0<r&&t.querySelectorAll("option").forEach(function(e,t){t===r?e.setAttribute("aria-selected","true"):e.removeAttribute("aria-selected")}),DBHelper.fetchRestaurantByCuisineAndNeighborhood(a,i,function(e,t){e?console.error(e):(resetRestaurants(t),fillRestaurantsHTML())})},resetRestaurants=function(e){self.restaurants=[],document.getElementById("restaurants-list").innerHTML="",self.markers.forEach(function(e){return e.setMap(null)}),self.markers=[],self.restaurants=e},fillRestaurantsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurants,n=document.getElementById("restaurants-list");e.forEach(function(e,t){n.append(createRestaurantHTML(e,t))}),window.google&&addMarkersToMap()},createRestaurantHTML=function(e,t){var n=document.createElement("li"),r=document.createElement("figure"),a=document.createElement("picture"),i=!0,o=!1,s=void 0;try{for(var d,l=responsiveBreakPoints[Symbol.iterator]();!(i=(d=l.next()).done);i=!0){var u=d.value,c=document.createElement("source");c.media="",u.media.maxwidth&&u.media.minwidth?c.media+="(min-width: "+u.media.minwidth+"px) and (max-width: "+u.media.maxwidth+"px)":(u.media.minwidth&&(c.media+="(min-width: "+u.media.minwidth+"px)"),u.media.maxwidth&&(c.media+="(max-width: "+u.media.maxwidth+"px)"));var m=[],f=!0,h=!1,p=void 0;try{for(var v,g=u.srcset[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){var E=v.value;"small"!==E.imgSuffix&&m.push(DBHelper.imageUrlForRestaurant(e,E.imgSuffix)+"  "+E.imgCondition)}}catch(e){h=!0,p=e}finally{try{!f&&g.return&&g.return()}finally{if(h)throw p}}0<m.length&&(c.dataset.srcset=m.join(m,","),a.append(c))}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}var M=document.createElement("img");M.className="restaurant-img lazy",M.dataset.src=DBHelper.imageUrlForRestaurant(e,"small"),M.alt="Image of the restaurant "+e.name,a.append(M),r.append(a);var w=document.createElement("figcaption");w.innerHTML=e.name,r.append(w),n.append(r);var H=document.createElement("h2");H.innerHTML=e.name,n.append(H);var b=document.createElement("p");b.innerHTML=e.neighborhood,n.append(b);var y=document.createElement("p");y.innerHTML=e.address,n.append(y);var L=document.createElement("a");return L.innerHTML="View Details",L.href=DBHelper.urlForRestaurant(e),L.setAttribute("tabindex",t+3),n.append(L),n},addMarkersToMap=function(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurants).forEach(function(e){var t=DBHelper.mapMarkerForRestaurant(e,self.map);google.maps.event.addListener(t,"click",function(){window.location.href=t.url}),self.markers.push(t)})};
//# sourceMappingURL=main.js.map

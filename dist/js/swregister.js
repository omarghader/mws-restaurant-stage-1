"use strict";var _createClass=function(){function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,n,t){return n&&r(e.prototype,n),t&&r(e,t),e}}();function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var SWService=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"registerServiceWorker",value:function(){if(navigator.serviceWorker){var n=this;navigator.serviceWorker.register("/sw.js").then(function(e){navigator.serviceWorker.controller&&(e.waiting?n.updateReady(e.waiting):e.installing?n.trackInstalling(e.installing):e.addEventListener("updatefound",function(){n.trackInstalling(e.installing)}))});var e=void 0;navigator.serviceWorker.addEventListener("controllerchange",function(){e||(window.location.reload(),e=!0)})}}},{key:"showCachedMessages",value:function(){var n=this;return this._dbPromise.then(function(e){if(e&&!n._postsView.showingPosts())return e.transaction(indexedDBName).objectStore(indexedDBName).index("by-date").getAll().then(function(e){n._postsView.addPosts(e.reverse())})})}},{key:"trackInstalling",value:function(e){var n=this;e.addEventListener("statechange",function(){"installed"==e.state&&n.updateReady(e)})}},{key:"updateReady",value:function(e){e.postMessage({action:"skipWaiting"})}}]),e}(),swregister=new SWService;swregister.registerServiceWorker();
//# sourceMappingURL=swregister.js.map

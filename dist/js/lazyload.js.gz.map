{"version":3,"sources":["lazyload.js"],"names":["lazy","setLazy","document","querySelectorAll","lazyLoad","i","length","isInViewport","src","getAttribute","cleanLazy","filter","call","l","el","rect","getBoundingClientRect","right","window","innerHeight","left","innerWidth","documentElement","clientWidth","addEventListener","func","attachEvent","event","registerListener"],"mappings":"aAAA,IAAIA,KAAO,GAGX,SAASC,UAIPD,KAAOE,SAASC,iBAAiB,iBAAjCH,QAAOE,IAAPF,SAAgBG,KAAAA,OAAhBH,gBAIF,SAASI,WAATJ,KAASI,SAATD,iBAAoB,iBAGlB,IAAK,IAAIE,EAAI,EAAGA,EAAIL,KAAKM,OAAQD,IAA5BE,aAAWF,KAAIL,KACdO,KAAAA,GAAAA,aAAuB,cACzBP,KAAIA,GAAAQ,IAAQC,KAAAA,GAARA,aAAJ,YACET,KAAKK,GAAGG,gBAAcC,aAM5BC,YAGF,SAASA,YAATV,KAASU,MAAAA,UAAYC,OAAAC,KAAAZ,KAAA,SAAAa,GAAA,OAAAA,EAAAJ,aAAA,cACsB,SAAzCF,aAAAO,GACD,IAAAC,EAAAD,EAAAE,wBAED,OACkBA,GAAhBD,EAAMA,QAIc,GAAdA,EAAKE,OAFXF,EACEA,MAAAG,OAAAC,aACkBjB,SACda,gBAAoBI,eAG3BJ,EAAAK,OAAAF,OAAAG,YAAAnB,SAAAoB,gBAAAC,aAIGL,SAAAA,iBAAOM,EAAPC,GADFP,OAEOM,iBACLN,OAAOQ,iBAAPC,EAAAF,GAEHP,OAAAQ,YAAA,KAAAC,EAAAF,GAMDG,iBAAiB,OAAjB3B,SAFA2B,iBAAiB,OAAQxB,UAIzBwB,iBAAA,SAAAxB,UACAwB,iBAAA,SAAAxB","file":"lazyload.js.gz","sourcesContent":["let lazy = [];\n\n\nfunction setLazy() {\n  // document.getElementById('listing').removeChild(document.getElementById('viewMore'));\n  // document.getElementById('nextPage').removeAttribute('class');\n\n  lazy = document.querySelectorAll('img[data-src]');\n  console.log(`Found ${lazy.length} lazy images`);\n}\n\nfunction lazyLoad() {\n  lazy = document.querySelectorAll('img[data-src]');\n\n  for (let i = 0; i < lazy.length; i++) {\n    if (isInViewport(lazy[i])) {\n      if (lazy[i].getAttribute('data-src')) {\n        lazy[i].src = lazy[i].getAttribute('data-src');\n        lazy[i].removeAttribute('data-src');\n      }\n    }\n  }\n\n  cleanLazy();\n}\n\nfunction cleanLazy() {\n  lazy = Array.prototype.filter.call(lazy, l => l.getAttribute('data-src'));\n}\n\nfunction isInViewport(el) {\n  const rect = el.getBoundingClientRect();\n\n  return (\n    rect.bottom >= 0 &&\n        rect.right >= 0 &&\n        rect.top <= (window.innerHeight || document.documentElement.clientHeight) &&\n        rect.left <= (window.innerWidth || document.documentElement.clientWidth)\n  );\n}\n\nfunction registerListener(event, func) {\n  if (window.addEventListener) {\n    window.addEventListener(event, func);\n  } else {\n    window.attachEvent(`on${event}`, func);\n  }\n}\n\n\nregisterListener('load', setLazy);\nregisterListener('load', lazyLoad);\nregisterListener('scroll', lazyLoad);\nregisterListener('resize', lazyLoad);\n\n//\n// document.addEventListener('DOMContentLoaded', () => {\n//   let lazyImages = [].slice.call(document.querySelectorAll('img.lazy'));\n//   let active = false;\n//\n//   const lazyLoad = function () {\n//     if (active === false) {\n//       active = true;\n//\n//       setTimeout(() => {\n//         lazyImages.forEach((lazyImage) => {\n//           if ((lazyImage.getBoundingClientRect().top <= window.innerHeight && lazyImage.getBoundingClientRect().bottom >= 0) && getComputedStyle(lazyImage).display !== 'none') {\n//             lazyImage.src = lazyImage.dataset.src;\n//             lazyImage.srcset = lazyImage.dataset.srcset;\n//             lazyImage.classList.remove('lazy');\n//\n//             lazyImages = lazyImages.filter(image => image !== lazyImage);\n//\n//             if (lazyImages.length === 0) {\n//               document.removeEventListener('scroll', lazyLoad);\n//               window.removeEventListener('resize', lazyLoad);\n//               window.removeEventListener('orientationchange', lazyLoad);\n//             }\n//           }\n//         });\n//\n//         active = false;\n//       }, 200);\n//     }\n//   };\n//\n//   document.addEventListener('scroll', lazyLoad);\n//   window.addEventListener('resize', lazyLoad);\n//   window.addEventListener('orientationchange', lazyLoad);\n// });\n"]}